/* eslint-disable jsx-a11y/alt-text */
/* eslint-disable @next/next/no-img-element */
import {GetStaticProps} from 'next';
import Head from 'next/head';
import {useState} from 'react';

import Card from '../components/Card';
import Search from '../components/Search';

const Home = ({data}: any) => {
  console.log(data);

  const [search, setSearch] = useState('');
  return (
    <>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <div className="bg-gray-500">
        <Search setSearch={setSearch}></Search>
        <ul className="">
          {data
            .filter((val: any) => {
              if (search == '') {
                return val;
              } else if (
                val.name.toLowerCase().includes(search.toLowerCase())
              ) {
                return val;
              }
            })
            .map(({id, name, image, genres}: any) => (
              <div key={id}>
                <p>
                  {id} - {name}
                  <img src={image.medium} />
                </p>
                {/* <div className="justify-between bg-gray-600">
                  {id <= 50 ? (
                    genres[0] === 'Action' ? (
                      <div className="bg-red-400 ">
                        <p>
                          {id} - {name}
                          <img src={image.medium} />
                        </p>
                      </div>
                    ) : (
                      ''
                    )
                  ) : (
                    ''
                  )}
                </div> */}

                {/* <div>{genres}</div> */}
              </div>
            ))}
        </ul>
      </div>
    </>
  );
};

export const getStaticProps = async () => {
  try {
    const res = await fetch(` https://api.tvmaze.com/shows`);
    const data = await res.json();

    return {
      props: {
        data,
      },
    };
  } catch (e) {
    console.log(e);
  }
};

export default Home;
